<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Final Leaderboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <style>
      body {
        font-family:'Bungee', sans-serif;
        background: #f2f2f2;
        text-align: center;
        margin: 0;
        padding: 20px;
      }
      .leaderboard {
        max-width: 600px;
        margin: 50px auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
      }
      .leaderboard h1 {
        margin-top: 0;
      }
      .player {
        font-size: 1.2em;
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }
      .player:last-child {
        border-bottom: none;
      }
      #play-again-btn {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="leaderboard">
      <h1>Final Leaderboard</h1>
      <div id="leaderboard-list"></div>
      <button id="play-again-btn">Play Again</button>
    </div>
    <script>
      // Retrieve the leaderboard data from localStorage
      const leaderboardData = localStorage.getItem("leaderboard");
      let leaderboard = leaderboardData ? JSON.parse(leaderboardData) : [];
      
      // Sort the leaderboard in descending order by score
      leaderboard.sort((a, b) => b.score - a.score);
      
      // Display each player in the leaderboard
      const listContainer = document.getElementById("leaderboard-list");
      leaderboard.forEach((player, index) => {
        const playerDiv = document.createElement("div");
        playerDiv.className = "player";
        playerDiv.textContent = `${index + 1}. ${player.name} â€” ${player.score}`;
        listContainer.appendChild(playerDiv);
      });
      
      // When the Play Again button is clicked, clear the leaderboard (if desired)
      // and redirect to the lobby screen.
      document.getElementById("play-again-btn").addEventListener("click", () => {
        // Optionally, clear the leaderboard data
        localStorage.removeItem("leaderboard");
        // Redirect to the lobby (update the URL to match your lobby screen)
        window.location.href = "lobby.html";
      });
    </script>
  </body>
</html>
